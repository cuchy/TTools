# ===================================================================
# C-BGP Export file (CLI)
# Domain AS 127
# ===================================================================

# -------------------------------------------------------------------
# Physical topology
# -------------------------------------------------------------------
net add node 192.168.0.0
net add node 192.168.0.1
net add node 192.168.0.2
net add node 192.168.0.3
net add node 192.168.0.4
net add node 192.168.0.5
net add node 192.168.0.6
net add node 192.168.0.7
net add node 192.168.0.8
net add node 192.168.0.9
net add node 192.168.0.10
net add node 192.168.0.11
net add node 192.168.0.12
net add node 192.168.0.13
net add node 192.168.0.14
net add node 192.168.0.15
net add node 192.168.0.16
net add node 192.168.0.17
net add node 192.168.0.18
net add node 192.168.0.19
net add node 192.168.0.20
net add node 192.168.0.21
net add node 192.168.0.22
net add node 192.168.0.23
net add node 192.168.0.24
net add node 192.168.0.25
net add node 192.168.0.26
net add node 192.168.0.27
net add node 192.168.0.28
net add node 192.168.0.29
net add node 192.168.0.30
net add node 192.168.0.31
net add node 192.168.0.32
net add node 192.168.0.33
net add node 192.168.0.34
net add node 192.168.0.35
net add node 192.168.0.36
net add node 192.168.0.37
net add node 192.168.0.38
net add node 192.168.0.39
net add node 192.168.0.40
net add node 192.168.0.41
net add node 192.168.0.42
net add node 192.168.0.43
net add node 192.168.0.44
net add node 192.168.0.45
net add node 192.168.0.46
net add node 192.168.0.47
net add node 192.168.0.48
net add node 192.168.0.49
net add node 192.168.0.50
net add node 192.168.0.51
net add node 192.168.0.52
net add node 192.168.0.53
net add node 192.168.0.54
net add node 192.168.0.55
net add node 192.168.0.56
net add node 192.168.0.57
net add node 192.168.0.58
net add node 192.168.0.59
net add link 192.168.0.4 192.168.0.0
net link 192.168.0.4 192.168.0.0 igp-weight --bidir 2
net add link 192.168.0.4 192.168.0.1
net link 192.168.0.4 192.168.0.1 igp-weight --bidir 3
net add link 192.168.0.2 192.168.0.4
net link 192.168.0.2 192.168.0.4 igp-weight --bidir 5
net add link 192.168.0.4 192.168.0.3
net link 192.168.0.4 192.168.0.3 igp-weight --bidir 6
net add link 192.168.0.4 192.168.0.9
net link 192.168.0.4 192.168.0.9 igp-weight --bidir 10
net add link 192.168.0.9 192.168.0.10
net link 192.168.0.9 192.168.0.10 igp-weight --bidir 1
net add link 192.168.0.9 192.168.0.13
net link 192.168.0.9 192.168.0.13 igp-weight --bidir 12
net add link 192.168.0.9 192.168.0.11
net link 192.168.0.9 192.168.0.11 igp-weight --bidir 13
net add link 192.168.0.13 192.168.0.14
net link 192.168.0.13 192.168.0.14 igp-weight --bidir 1
net add link 192.168.0.13 192.168.0.12
net link 192.168.0.13 192.168.0.12 igp-weight --bidir 2
net add link 192.168.0.5 192.168.0.9
net link 192.168.0.5 192.168.0.9 igp-weight --bidir 8
net add link 192.168.0.9 192.168.0.6
net link 192.168.0.9 192.168.0.6 igp-weight --bidir 12
net add link 192.168.0.9 192.168.0.7
net link 192.168.0.9 192.168.0.7 igp-weight --bidir 6
net add link 192.168.0.9 192.168.0.8
net link 192.168.0.9 192.168.0.8 igp-weight --bidir 5
net add link 192.168.0.1 192.168.0.15
net link 192.168.0.1 192.168.0.15 igp-weight --bidir 1
net add link 192.168.0.1 192.168.0.16
net link 192.168.0.1 192.168.0.16 igp-weight --bidir 1
net add link 192.168.0.4 192.168.0.18
net link 192.168.0.4 192.168.0.18 igp-weight --bidir 2
net add link 192.168.0.4 192.168.0.19
net link 192.168.0.4 192.168.0.19 igp-weight --bidir 3
net add link 192.168.0.4 192.168.0.20
net link 192.168.0.4 192.168.0.20 igp-weight --bidir 5
net add link 192.168.0.4 192.168.0.21
net link 192.168.0.4 192.168.0.21 igp-weight --bidir 2
net add link 192.168.0.4 192.168.0.22
net link 192.168.0.4 192.168.0.22 igp-weight --bidir 4
net add link 192.168.0.4 192.168.0.23
net link 192.168.0.4 192.168.0.23 igp-weight --bidir 1
net add link 192.168.0.6 192.168.0.24
net link 192.168.0.6 192.168.0.24 igp-weight --bidir 4
net add link 192.168.0.6 192.168.0.25
net link 192.168.0.6 192.168.0.25 igp-weight --bidir 3
net add link 192.168.0.6 192.168.0.26
net link 192.168.0.6 192.168.0.26 igp-weight --bidir 2
net add link 192.168.0.6 192.168.0.27
net link 192.168.0.6 192.168.0.27 igp-weight --bidir 1
net add link 192.168.0.6 192.168.0.28
net link 192.168.0.6 192.168.0.28 igp-weight --bidir 3
net add link 192.168.0.6 192.168.0.29
net link 192.168.0.6 192.168.0.29 igp-weight --bidir 3
net add link 192.168.0.30 192.168.0.5
net link 192.168.0.30 192.168.0.5 igp-weight --bidir 1
net add link 192.168.0.5 192.168.0.31
net link 192.168.0.5 192.168.0.31 igp-weight --bidir 1
net add link 192.168.0.5 192.168.0.33
net link 192.168.0.5 192.168.0.33 igp-weight --bidir 2
net add link 192.168.0.5 192.168.0.32
net link 192.168.0.5 192.168.0.32 igp-weight --bidir 3
net add link 192.168.0.7 192.168.0.36
net link 192.168.0.7 192.168.0.36 igp-weight --bidir 1
net add link 192.168.0.7 192.168.0.34
net link 192.168.0.7 192.168.0.34 igp-weight --bidir 2
net add link 192.168.0.7 192.168.0.35
net link 192.168.0.7 192.168.0.35 igp-weight --bidir 4
net add link 192.168.0.7 192.168.0.37
net link 192.168.0.7 192.168.0.37 igp-weight --bidir 4
net add link 192.168.0.7 192.168.0.38
net link 192.168.0.7 192.168.0.38 igp-weight --bidir 4
net add link 192.168.0.7 192.168.0.39
net link 192.168.0.7 192.168.0.39 igp-weight --bidir 3
net add link 192.168.0.8 192.168.0.42
net link 192.168.0.8 192.168.0.42 igp-weight --bidir 2
net add link 192.168.0.8 192.168.0.40
net link 192.168.0.8 192.168.0.40 igp-weight --bidir 3
net add link 192.168.0.8 192.168.0.41
net link 192.168.0.8 192.168.0.41 igp-weight --bidir 3
net add link 192.168.0.4 192.168.0.17
net link 192.168.0.4 192.168.0.17 igp-weight --bidir 3
net add link 192.168.0.10 192.168.0.54
net link 192.168.0.10 192.168.0.54 igp-weight --bidir 3
net add link 192.168.0.9 192.168.0.53
net link 192.168.0.9 192.168.0.53 igp-weight --bidir 1
net add link 192.168.0.9 192.168.0.52
net link 192.168.0.9 192.168.0.52 igp-weight --bidir 5
net add link 192.168.0.9 192.168.0.51
net link 192.168.0.9 192.168.0.51 igp-weight --bidir 3
net add link 192.168.0.9 192.168.0.50
net link 192.168.0.9 192.168.0.50 igp-weight --bidir 5
net add link 192.168.0.9 192.168.0.49
net link 192.168.0.9 192.168.0.49 igp-weight --bidir 2
net add link 192.168.0.9 192.168.0.43
net link 192.168.0.9 192.168.0.43 igp-weight --bidir 9
net add link 192.168.0.9 192.168.0.44
net link 192.168.0.9 192.168.0.44 igp-weight --bidir 7
net add link 192.168.0.9 192.168.0.45
net link 192.168.0.9 192.168.0.45 igp-weight --bidir 10
net add link 192.168.0.9 192.168.0.46
net link 192.168.0.9 192.168.0.46 igp-weight --bidir 6
net add link 192.168.0.9 192.168.0.47
net link 192.168.0.9 192.168.0.47 igp-weight --bidir 4
net add link 192.168.0.9 192.168.0.48
net link 192.168.0.9 192.168.0.48 igp-weight --bidir 8
net add link 192.168.0.13 192.168.0.56
net link 192.168.0.13 192.168.0.56 igp-weight --bidir 1
net add link 192.168.0.13 192.168.0.55
net link 192.168.0.13 192.168.0.55 igp-weight --bidir 1
net add link 192.168.0.13 192.168.0.59
net link 192.168.0.13 192.168.0.59 igp-weight --bidir 1
net add link 192.168.0.14 192.168.0.57
net link 192.168.0.14 192.168.0.57 igp-weight --bidir 1
net add link 192.168.0.14 192.168.0.58
net link 192.168.0.14 192.168.0.58 igp-weight --bidir 1

# -------------------------------------------------------------------
# Static routing
# -------------------------------------------------------------------

# -------------------------------------------------------------------
# IGP routing
# -------------------------------------------------------------------
net add domain 127 igp
net node 192.168.0.0 domain 127
net node 192.168.0.1 domain 127
net node 192.168.0.2 domain 127
net node 192.168.0.3 domain 127
net node 192.168.0.4 domain 127
net node 192.168.0.5 domain 127
net node 192.168.0.6 domain 127
net node 192.168.0.7 domain 127
net node 192.168.0.8 domain 127
net node 192.168.0.9 domain 127
net node 192.168.0.10 domain 127
net node 192.168.0.11 domain 127
net node 192.168.0.12 domain 127
net node 192.168.0.13 domain 127
net node 192.168.0.14 domain 127
net node 192.168.0.15 domain 127
net node 192.168.0.16 domain 127
net node 192.168.0.17 domain 127
net node 192.168.0.18 domain 127
net node 192.168.0.19 domain 127
net node 192.168.0.20 domain 127
net node 192.168.0.21 domain 127
net node 192.168.0.22 domain 127
net node 192.168.0.23 domain 127
net node 192.168.0.24 domain 127
net node 192.168.0.25 domain 127
net node 192.168.0.26 domain 127
net node 192.168.0.27 domain 127
net node 192.168.0.28 domain 127
net node 192.168.0.29 domain 127
net node 192.168.0.30 domain 127
net node 192.168.0.31 domain 127
net node 192.168.0.32 domain 127
net node 192.168.0.33 domain 127
net node 192.168.0.34 domain 127
net node 192.168.0.35 domain 127
net node 192.168.0.36 domain 127
net node 192.168.0.37 domain 127
net node 192.168.0.38 domain 127
net node 192.168.0.39 domain 127
net node 192.168.0.40 domain 127
net node 192.168.0.41 domain 127
net node 192.168.0.42 domain 127
net node 192.168.0.43 domain 127
net node 192.168.0.44 domain 127
net node 192.168.0.45 domain 127
net node 192.168.0.46 domain 127
net node 192.168.0.47 domain 127
net node 192.168.0.48 domain 127
net node 192.168.0.49 domain 127
net node 192.168.0.50 domain 127
net node 192.168.0.51 domain 127
net node 192.168.0.52 domain 127
net node 192.168.0.53 domain 127
net node 192.168.0.54 domain 127
net node 192.168.0.55 domain 127
net node 192.168.0.56 domain 127
net node 192.168.0.57 domain 127
net node 192.168.0.58 domain 127
net node 192.168.0.59 domain 127
net domain 127 compute

# -------------------------------------------------------------------
# BGP routing
# -------------------------------------------------------------------
bgp options msg-monitor /home/viviana/Escritorio/xTotem/probe/topologies/FORTHNet-ISTAR.msg


# -------------------------------------------------------------------
# BGP filters
# -------------------------------------------------------------------


# -------------------------------------------------------------------
# Scenario to simulate
# -------------------------------------------------------------------

net add node 10.10.10.1
net add domain 129 igp
net node 10.10.10.1 domain 129
net add link 192.168.0.7 10.10.10.1
net node 192.168.0.7 route add --oif=10.10.10.1 --gw=10.10.10.1 10.10.10.1/32 0
net node 10.10.10.1 route add --oif=192.168.0.7 --gw=192.168.0.7 192.168.0.7/32 0
bgp router 192.168.0.7
	add peer 129 10.10.10.1
	peer 10.10.10.1 virtual
	peer 10.10.10.1 next-hop-self
	peer 10.10.10.1 up
	exit

bgp router 192.168.0.7 peer 10.10.10.1 recv "BGP4|1359575702|A|111.91.233.1|45896|114.143.237.0/24|129 45896 174 6453 4755 17762|IGP|10.10.10.1|0|0"
bgp router 192.168.0.7 peer 10.10.10.1 recv "BGP4|1359575702|A|111.91.233.1|45896|114.143.241.0/24|129 45896 174 6453 4755 17762|IGP|10.10.10.1|0|0"
bgp router 192.168.0.7 peer 10.10.10.1 recv "BGP4|1359575702|A|111.91.233.1|45896|114.143.242.0/24|129 45896 174 6453 4755 17762|IGP|10.10.10.1|0|0"
bgp router 192.168.0.7 peer 10.10.10.1 recv "BGP4|1359575702|A|111.91.233.1|45896|114.143.240.0/24|129 45896 174 6453 4755 17762|IGP|10.10.10.1|0|0"
bgp router 192.168.0.7 peer 10.10.10.1 recv "BGP4|1359575702|A|111.91.233.1|45896|114.143.243.0/24|129 45896 174 6453 4755 17762|IGP|10.10.10.1|0|0"
bgp router 192.168.0.7 peer 10.10.10.1 recv "BGP4|1359575702|A|111.91.233.1|45896|114.143.235.0/24|129 45896 174 6453 4755 17762|IGP|10.10.10.1|0|0"
bgp router 192.168.0.7 peer 10.10.10.1 recv "BGP4|1359575702|A|111.91.233.1|45896|114.143.244.0/24|129 45896 174 6453 4755 17762|IGP|10.10.10.1|0|0"
bgp router 192.168.0.7 peer 10.10.10.1 recv "BGP4|1359575702|A|111.91.233.1|45896|114.143.239.0/24|129 45896 174 6453 4755 17762|IGP|10.10.10.1|0|0"
bgp router 192.168.0.7 peer 10.10.10.1 recv "BGP4|1359575702|A|111.91.233.1|45896|114.143.245.0/24|129 45896 174 6453 4755 17762|IGP|10.10.10.1|0|0"
bgp router 192.168.0.7 peer 10.10.10.1 recv "BGP4|1359575702|A|111.91.233.1|45896|114.143.236.0/24|129 45896 174 6453 4755 17762|IGP|10.10.10.1|0|0"

net add node 10.10.10.2
net add domain 130 igp
net node 10.10.10.2 domain 130
net add link 192.168.0.12 10.10.10.2
net node 192.168.0.12 route add --oif=10.10.10.2 --gw=10.10.10.2 10.10.10.2/32 0
net node 10.10.10.2 route add --oif=192.168.0.12 --gw=192.168.0.12 192.168.0.12/32 0
bgp router 192.168.0.12
	add peer 130 10.10.10.2
	peer 10.10.10.2 virtual
	peer 10.10.10.2 next-hop-self
	peer 10.10.10.2 up
	exit

bgp router 192.168.0.12 peer 10.10.10.2 recv "BGP4|1359575702|A|111.91.233.1|45896|114.143.246.0/24|130 45896 174 6453 4755 17762|IGP|10.10.10.2|0|0"
bgp router 192.168.0.12 peer 10.10.10.2 recv "BGP4|1359575702|A|111.91.233.1|45896|114.143.235.0/24|130 45896 174 6453 4755 17762|IGP|10.10.10.2|0|0"
bgp router 192.168.0.12 peer 10.10.10.2 recv "BGP4|1359575702|A|111.91.233.1|45896|114.143.237.0/24|130 45896 174 6453 4755 17762|IGP|10.10.10.2|0|0"
bgp router 192.168.0.12 peer 10.10.10.2 recv "BGP4|1359575702|A|111.91.233.1|45896|114.143.249.0/24|130 45896 174 6453 4755 17762|IGP|10.10.10.2|0|0"
bgp router 192.168.0.12 peer 10.10.10.2 recv "BGP4|1359575702|A|111.91.233.1|45896|114.143.250.0/24|130 45896 174 6453 4755 17762|IGP|10.10.10.2|0|0"
bgp router 192.168.0.12 peer 10.10.10.2 recv "BGP4|1359575702|A|111.91.233.1|45896|123.252.192.0/18|130 45896 174 6453 4755 17762|IGP|10.10.10.2|0|0"
bgp router 192.168.0.12 peer 10.10.10.2 recv "BGP4|1359575702|A|111.91.233.1|45896|114.143.240.0/24|130 45896 174 6453 4755 17762|IGP|10.10.10.2|0|0"
bgp router 192.168.0.12 peer 10.10.10.2 recv "BGP4|1359575702|A|111.91.233.1|45896|114.143.236.0/24|130 45896 174 6453 4755 17762|IGP|10.10.10.2|0|0"
bgp router 192.168.0.12 peer 10.10.10.2 recv "BGP4|1359575702|A|111.91.233.1|45896|114.143.239.0/24|130 45896 174 6453 4755 17762|IGP|10.10.10.2|0|0"
bgp router 192.168.0.12 peer 10.10.10.2 recv "BGP4|1359575703|A|218.189.6.2|9304|114.143.239.0/24|130 9304 2914 6453 6453 4755 17762|IGP|10.10.10.2|0|0"

# -------------------------------------------------------------------
# Start simulation
# -------------------------------------------------------------------
sim run

# -------------------------------------------------------------------
# Start data section
# -------------------------------------------------------------------
